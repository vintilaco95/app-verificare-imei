<%
  const tFn = (typeof t === 'function')
    ? t
    : (typeof locals !== 'undefined' && typeof locals.t === 'function'
      ? locals.t
      : (key) => key);
  const currentLangValue = typeof currentLang !== 'undefined'
    ? currentLang
    : (typeof locals !== 'undefined' && typeof locals.currentLang !== 'undefined'
      ? locals.currentLang
      : 'ro');
  const currentLangLabelValue = typeof currentLangLabel !== 'undefined'
    ? currentLangLabel
    : (typeof locals !== 'undefined' && typeof locals.currentLangLabel !== 'undefined'
      ? locals.currentLangLabel
      : currentLangValue);
  const switchLangValue = typeof switchLang !== 'undefined'
    ? switchLang
    : (typeof locals !== 'undefined' && typeof locals.switchLang !== 'undefined'
      ? locals.switchLang
      : (currentLangValue === 'ro' ? 'en' : 'ro'));
  const switchLangLabelValue = typeof switchLangLabel !== 'undefined'
    ? switchLangLabel
    : (typeof locals !== 'undefined' && typeof locals.switchLangLabel !== 'undefined'
      ? locals.switchLangLabel
      : currentLangLabelValue);
  const brandName = tFn('nav.brand');
  const footerTagline = tFn('footer.brand.tagline');
  const footerRights = tFn('footer.bottom.rights');
  const footerYear = new Date().getFullYear();
  const copyrightHtml = tFn('footer.bottom.copyright')
    .replace('{year}', footerYear)
    .replace('{brand}', brandName)
    .replace('{rights}', footerRights);
  const cookiesLinkHtml = `<a href="/legal/cookies">${tFn('footer.links.cookies')}</a>`;
  const cookieDescriptionHtml = tFn('footer.cookie.description').replace('{cookiesLink}', cookiesLinkHtml);
  const supportPhoneRaw = tFn('footer.contact.phone');
  const supportPhoneDigits = (supportPhoneRaw || '').replace(/\D/g, '');
  const whatsappNumber = supportPhoneDigits && supportPhoneDigits.length >= 8 ? supportPhoneDigits : '40721171995';
  const supportEmail = tFn('footer.contact.email');
  const supportPhoneHref = supportPhoneDigits ? `+${supportPhoneDigits}` : '';
%>
<footer class="footer">
  <div class="footer-container">
    <div class="footer-brand">
      <a href="/" class="footer-logo">
        <span class="footer-logo-icon">
          <span class="logo-emoji" aria-hidden="true">üê∂</span>
        </span>
        <span class="footer-logo-text"><%= brandName %></span>
      </a>
      <p class="footer-description">
        <%= footerTagline %>
      </p>
    </div>

    <div class="footer-columns">
      <div class="footer-column">
        <h4 class="footer-title"><%= tFn('footer.columns.legal.title') %></h4>
        <ul class="footer-links">
          <li><a href="/legal/terms"><%= tFn('footer.links.terms') %></a></li>
          <li><a href="/legal/privacy"><%= tFn('footer.links.privacy') %></a></li>
          <li><a href="/legal/gdpr"><%= tFn('footer.links.gdpr') %></a></li>
          <li><a href="/legal/cookies"><%= tFn('footer.links.cookies') %></a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h4 class="footer-title"><%= tFn('footer.columns.resources.title') %></h4>
        <ul class="footer-links">
          <li><a href="/faq"><%= tFn('footer.links.faq') %></a></li>
          <li><a href="/dashboard/credits/topup"><%= tFn('footer.links.topup') %></a></li>
          <li><a href="/verify/imei"><%= tFn('footer.links.verify') %></a></li>
          <li><a href="/"><%= tFn('footer.links.pricing') %></a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h4 class="footer-title"><%= tFn('footer.columns.contact.title') %></h4>
        <ul class="footer-links">
          <li><a href="mailto:<%= supportEmail %>"><%= supportEmail %></a></li>
          <li><a href="tel:<%= supportPhoneHref %>"><%= supportPhoneRaw %></a></li>
        </ul>
      </div>
    </div>
  </div>
  <div class="footer-bottom">
    <span><%- copyrightHtml %></span>
    <div class="footer-badges">
      <span class="footer-badge"><%= tFn('footer.badges.stripe') %></span>
      <span class="footer-badge"><%= tFn('footer.badges.gdpr') %></span>
    </div>
  </div>
</footer>

</main>

<div class="cookie-banner" id="cookie-banner" role="dialog" aria-live="polite" aria-label="<%= tFn('footer.cookie.aria') %>">
  <div class="cookie-banner-content">
    <div class="cookie-text">
      <h3><%= tFn('footer.cookie.title') %></h3>
      <p>
        <%- cookieDescriptionHtml %>
      </p>
    </div>
    <div class="cookie-actions">
      <button type="button" class="btn btn-secondary" id="cookie-settings"><%= tFn('footer.cookie.cta.settings') %></button>
      <button type="button" class="btn btn-primary" id="cookie-accept"><%= tFn('footer.cookie.cta.accept') %></button>
    </div>
  </div>
</div>

<div class="fane-bot" id="fane-bot" aria-live="polite">
  <button type="button" class="fane-bot-toggle" id="fane-bot-toggle" aria-expanded="false" aria-controls="fane-bot-window">
        <span class="fane-bot-avatar" aria-hidden="true">üëç</span>
    <span class="fane-bot-toggle-label">FANE BOT</span>
  </button>
  <div class="fane-bot-window" id="fane-bot-window" hidden>
    <header class="fane-bot-header">
      <div class="fane-bot-header-info">
        <span class="fane-bot-name">FANE BOT</span>
        <span class="fane-bot-role">Expert GSM &amp; Repara»õii</span>
      </div>
      <button type="button" class="fane-bot-close" id="fane-bot-close" aria-label="√énchide chatul">
        ‚úï
      </button>
    </header>
    <div class="fane-bot-messages" id="fane-bot-messages" role="log"></div>
    <div class="fane-bot-status" id="fane-bot-status" hidden></div>
    <form class="fane-bot-form" id="fane-bot-form" novalidate>
      <label class="sr-only" for="fane-bot-input">Mesaj cƒÉtre FANE</label>
      <button type="button" class="fane-bot-suggest-toggle" id="fane-bot-suggest-toggle" aria-expanded="false" aria-controls="fane-bot-suggestions">
        <span class="sr-only">Sugestii √ÆntrebƒÉri</span>
        <span class="fane-bot-suggest-icon">?</span>
      </button>
      <textarea id="fane-bot-input" class="fane-bot-input" rows="2" placeholder="√éntreabƒÉ-l pe FANE despre telefon..." required></textarea>
      <button type="submit" class="fane-bot-send" id="fane-bot-send">Trimite</button>
    </form>
    <div class="fane-bot-suggestions" id="fane-bot-suggestions" aria-label="Sugestii rapide" hidden></div>
  </div>
</div>

<script src="/js/main.js"></script>
<script src="/js/phone-background.js"></script>
<script src="/js/fane-bot.js" defer></script>
</body>
</html>
