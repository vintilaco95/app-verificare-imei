<%- include('../partials/header', { title: t('auth.login.pageTitle'), user: user }) %>

<div class="auth-container">
  <div class="auth-card">
    <h1 class="auth-title"><%= t('auth.login.heading') %></h1>
    <p class="auth-subtitle"><%= t('auth.login.subtitle') %></p>
    
    <%- include('../partials/flash', { errors: errors }) %>
    
  <form action="/auth/login" method="POST" class="auth-form">
    <input type="hidden" name="_csrf" value="<%= typeof csrfToken !== 'undefined' ? csrfToken : '' %>">
      <div class="form-group">
        <label for="email"><%= t('auth.login.form.email.label') %></label>
        <input 
          type="email" 
          id="email" 
          name="email" 
          required 
          autocomplete="email"
          placeholder="<%= t('auth.login.form.email.placeholder') %>"
          value="<%= typeof pendingEmail !== 'undefined' ? pendingEmail : '' %>"
        >
      </div>
      
      <div class="form-group">
        <label for="password"><%= t('auth.login.form.password.label') %></label>
        <input 
          type="password" 
          id="password" 
          name="password" 
          required 
          autocomplete="current-password"
          placeholder="<%= t('auth.login.form.password.placeholder') %>"
        >
      </div>
      
      <button type="submit" class="btn btn-primary btn-block"><%= t('auth.login.form.submit') %></button>
    </form>

    <% if (typeof showResend !== 'undefined' && showResend && pendingEmail) { %>
      <div class="auth-info-box muted">
        <p><%= t('auth.login.resendPrompt') %></p>
        <form action="/auth/resend-verification" method="POST" class="resend-form">
          <input type="hidden" name="_csrf" value="<%= typeof csrfToken !== 'undefined' ? csrfToken : '' %>">
          <input type="hidden" name="email" value="<%= pendingEmail %>">
          <button type="submit" class="link-button"><%= t('auth.login.resendVerification') %></button>
        </form>
      </div>
    <% } %>
    
    <p class="auth-footer">
      <%= t('auth.login.footer.question') %> <a href="/auth/register"><%= t('auth.login.footer.link') %></a>
    </p>
  </div>
</div>

<%- include('../partials/footer') %>
