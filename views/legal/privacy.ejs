<%
  const tt = (typeof t === 'function')
    ? t
    : (typeof locals !== 'undefined' && typeof locals.t === 'function' ? locals.t : (key) => key);
  const currentLangValue = typeof currentLang !== 'undefined'
    ? currentLang
    : (typeof locals !== 'undefined' && typeof locals.currentLang !== 'undefined' ? locals.currentLang : 'ro');
  const currentLangLabelValue = typeof currentLangLabel !== 'undefined'
    ? currentLangLabel
    : (typeof locals !== 'undefined' && typeof locals.currentLangLabel !== 'undefined' ? locals.currentLangLabel : currentLangValue);
  const switchLangValue = typeof switchLang !== 'undefined'
    ? switchLang
    : (typeof locals !== 'undefined' && typeof locals.switchLang !== 'undefined' ? locals.switchLang : (currentLangValue === 'ro' ? 'en' : 'ro'));
  const switchLangLabelValue = typeof switchLangLabel !== 'undefined'
    ? switchLangLabel
    : (typeof locals !== 'undefined' && typeof locals.switchLangLabel !== 'undefined' ? locals.switchLangLabel : currentLangLabelValue);
  const csrfValue = typeof csrfToken !== 'undefined'
    ? csrfToken
    : (typeof locals !== 'undefined' && typeof locals.csrfToken !== 'undefined' ? locals.csrfToken : '');
  const headerProps = {
    title: tt('legal.privacy.pageTitle'),
    user: typeof user !== 'undefined' ? user : (typeof locals !== 'undefined' && typeof locals.user !== 'undefined' ? locals.user : null),
    csrfToken: csrfValue,
    t: typeof t === 'function' ? t : null,
    currentLang: currentLangValue,
    currentLangLabel: currentLangLabelValue,
    switchLang: switchLangValue,
    switchLangLabel: switchLangLabelValue
  };
  const locale = currentLangValue === 'en' ? 'en-GB' : 'ro-RO';
  const lastUpdated = tt('legal.privacy.lastUpdated').replace('{date}', new Date().toLocaleDateString(locale));
  const emailLink = `<a href="mailto:telefoane@zengsm.ro">${tt('footer.contact.email')}</a>`;
  const rightsParagraph = tt('legal.privacy.sections.4.contact').replace('{emailLink}', emailLink);
%>
<%- include('../partials/header', headerProps) %>

<section class="legal-page">
  <header class="legal-hero">
    <h1><%= tt('legal.privacy.pageTitle') %></h1>
    <p><%= lastUpdated %></p>
  </header>

  <article class="legal-content">
    <section class="legal-section">
      <h2><%= tt('legal.privacy.sections.1.title') %></h2>
      <p><%= tt('legal.privacy.sections.1.body') %></p>
    </section>

    <section class="legal-section">
      <h2><%= tt('legal.privacy.sections.2.title') %></h2>
      <ul>
        <li><%= tt('legal.privacy.sections.2.items.1') %></li>
        <li><%= tt('legal.privacy.sections.2.items.2') %></li>
        <li><%= tt('legal.privacy.sections.2.items.3') %></li>
      </ul>
    </section>

    <section class="legal-section">
      <h2><%= tt('legal.privacy.sections.3.title') %></h2>
      <p><%= tt('legal.privacy.sections.3.intro') %></p>
      <ul>
        <li><%= tt('legal.privacy.sections.3.items.1') %></li>
        <li><%= tt('legal.privacy.sections.3.items.2') %></li>
        <li><%= tt('legal.privacy.sections.3.items.3') %></li>
      </ul>
    </section>

    <section class="legal-section">
      <h2><%= tt('legal.privacy.sections.4.title') %></h2>
      <p><%= tt('legal.privacy.sections.4.intro') %></p>
      <ul>
        <li><%= tt('legal.privacy.sections.4.items.1') %></li>
        <li><%= tt('legal.privacy.sections.4.items.2') %></li>
        <li><%= tt('legal.privacy.sections.4.items.3') %></li>
        <li><%= tt('legal.privacy.sections.4.items.4') %></li>
      </ul>
      <p><%- rightsParagraph %></p>
    </section>

    <section class="legal-section">
      <h2><%= tt('legal.privacy.sections.5.title') %></h2>
      <p><%= tt('legal.privacy.sections.5.body') %></p>
    </section>
  </article>
</section>

<%- include('../partials/footer', {
  t: typeof t === 'function' ? t : null,
  currentLang: currentLangValue,
  currentLangLabel: currentLangLabelValue,
  switchLang: switchLangValue,
  switchLangLabel: switchLangLabelValue
}) %>

