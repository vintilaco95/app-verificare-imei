<%- include('../partials/header', { title: title, user: user }) %>

<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>ÃncarcÄƒ credite</h1>
    <a href="/dashboard/credits" class="btn btn-secondary">Ãnapoi la credite</a>
  </div>

  <div class="topup-info">
    <p class="topup-subtitle">Alege una dintre opÈ›iunile recomandate sau introduce o sumÄƒ personalizatÄƒ. Plata se face rapid È™i securizat cu cardul.</p>
  </div>

  <% if (errors && errors.length > 0) { %>
    <div class="error-box">
      <ul>
        <% errors.forEach(error => { %>
          <li><%= error.msg %></li>
        <% }); %>
      </ul>
    </div>
  <% } %>

  <div class="topup-packages">
    <h2>Pachete recomandate</h2>
    <div class="package-grid">
      <% packages.forEach(pkg => { %>
        <div class="package-card">
          <h3><%= pkg.label %></h3>
          <p class="package-credits"><%= pkg.credits %> credite</p>
          <p class="package-description"><%= pkg.description %></p>
          <p class="package-price"><%= pkg.price.toFixed(2) %> RON</p>
          <form action="/dashboard/credits/topup" method="POST">
            <input type="hidden" name="_csrf" value="<%= typeof csrfToken !== 'undefined' ? csrfToken : '' %>">
            <input type="hidden" name="packageId" value="<%= pkg.id %>">
            <button type="submit" class="btn btn-primary btn-block">PlÄƒteÈ™te cu cardul</button>
          </form>
        </div>
      <% }); %>
    </div>
  </div>

  <div class="custom-topup-card">
    <h2>SumÄƒ personalizatÄƒ</h2>
    <p>Alege exact cÃ¢te credite doreÈ™ti sÄƒ adaugi. Suma minimÄƒ este <strong><%= minAmount %> credite</strong>.</p>
    <form action="/dashboard/credits/topup" method="POST" class="custom-topup-form">
      <input type="hidden" name="_csrf" value="<%= typeof csrfToken !== 'undefined' ? csrfToken : '' %>">
      <input type="hidden" name="packageId" value="custom">
      <div class="form-group">
        <label for="custom-amount">Suma (credite / RON)</label>
        <input type="number" id="custom-amount" name="customAmount" min="<%= minAmount %>" step="1" placeholder="<%= minAmount %>" required>
      </div>
      <button type="submit" class="btn btn-primary btn-large">Continua la platÄƒ</button>
    </form>
  </div>

  <div class="topup-security">
    <div class="security-card">
      <div class="security-icon">ğŸ”</div>
      <div>
        <h3>PlatÄƒ securizatÄƒ Stripe</h3>
        <p>Toate plÄƒÈ›ile sunt procesate prin Stripe, lider global Ã®n plÄƒÈ›i online. Datele tale de card nu ajung niciodatÄƒ pe serverele noastre.</p>
      </div>
    </div>
  </div>
</div>

<%- include('../partials/footer') %>

