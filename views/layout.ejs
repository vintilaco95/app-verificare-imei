<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= typeof title !== 'undefined' ? title + ' - ' : '' %>Verificare IMEI</title>
  <link rel="stylesheet" href="/css/style.css">
  <script>
    window.csrfToken = <%= JSON.stringify(typeof csrfToken !== 'undefined' ? csrfToken : '') %>;
  </script>
</head>
<body>
  <!-- Animated Background -->
  <div class="animated-bg">
    <div class="bg-shapes">
      <div class="shape shape-1"></div>
      <div class="shape shape-2"></div>
      <div class="shape shape-3"></div>
      <div class="shape shape-4"></div>
      <div class="shape shape-5"></div>
    </div>
  </div>

  <%
    const tFn = (typeof t === 'function')
      ? t
      : (typeof locals !== 'undefined' && typeof locals.t === 'function' ? locals.t : (key) => key);
    const currentLangValue = typeof currentLang !== 'undefined'
      ? currentLang
      : (typeof locals !== 'undefined' && typeof locals.currentLang !== 'undefined' ? locals.currentLang : 'ro');
    const currentLangLabelValue = typeof currentLangLabel !== 'undefined'
      ? currentLangLabel
      : (typeof locals !== 'undefined' && typeof locals.currentLangLabel !== 'undefined' ? locals.currentLangLabel : currentLangValue);
    const switchLangValue = typeof switchLang !== 'undefined'
      ? switchLang
      : (typeof locals !== 'undefined' && typeof locals.switchLang !== 'undefined' ? locals.switchLang : (currentLangValue === 'ro' ? 'en' : 'ro'));
    const switchLangLabelValue = typeof switchLangLabel !== 'undefined'
      ? switchLangLabel
      : (typeof locals !== 'undefined' && typeof locals.switchLangLabel !== 'undefined' ? locals.switchLangLabel : currentLangLabelValue);
    const csrfValue = typeof csrfToken !== 'undefined'
      ? csrfToken
      : (typeof locals !== 'undefined' && typeof locals.csrfToken !== 'undefined' ? locals.csrfToken : '');
    const userValue = typeof user !== 'undefined'
      ? user
      : (typeof locals !== 'undefined' && typeof locals.user !== 'undefined' ? locals.user : null);
    const headerProps = {
      title: typeof title !== 'undefined' ? title : '',
      user: userValue,
      csrfToken: csrfValue,
      t: typeof t === 'function' ? t : null,
      currentLang: currentLangValue,
      currentLangLabel: currentLangLabelValue,
      switchLang: switchLangValue,
      switchLangLabel: switchLangLabelValue
    };
    const footerProps = {
      t: typeof t === 'function' ? t : null,
      currentLang: currentLangValue,
      currentLangLabel: currentLangLabelValue,
      switchLang: switchLangValue,
      switchLangLabel: switchLangLabelValue
    };
  %>
  <%- include('partials/header', headerProps) %>
  <!-- Main Content -->
  <main class="main-content">
    <%- body %>
  </main>

  <%- include('partials/footer', footerProps) %>

  <!-- Cookie Banner -->
  <div class="cookie-banner" id="cookie-banner" role="dialog" aria-live="polite" aria-label="Politica de cookies">
    <div class="cookie-banner-content">
      <div class="cookie-text">
        <h3>Folosim cookie-uri</h3>
        <p>
          Utilizăm cookie-uri pentru a personaliza experiența, a analiza traficul și a proteja utilizatorii.
          Continuând navigarea ești de acord cu <a href="/legal/cookies">Politica de Cookies</a>.
        </p>
      </div>
      <div class="cookie-actions">
        <button type="button" class="btn btn-secondary" id="cookie-settings">Setări</button>
        <button type="button" class="btn btn-primary" id="cookie-accept">Accept toate</button>
      </div>
    </div>
  </div>

  <script src="/js/main.js"></script>
</body>
</html>
